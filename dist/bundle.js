(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,r,a,s,o=[],h=!0,c=!1;try{if(a=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;h=!1}else for(;!(h=(n=a.call(i)).done)&&(o.push(n.value),o.length!==e);h=!0);}catch(t){c=!0,r=t}finally{try{if(!h&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw r}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function r(t,e,i){return(e=a(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(e){var i=function(e,i){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,i||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"==t(i)?i:i+""}var s=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"rand",(function(t){return t*Math.random()})),r(this,"fadeInOut",(function(t,e){var i=.5*e;return Math.abs((t+i)%e-i)/i})),this.pipePropCount=8,this.pipePropsLength=30*this.pipePropCount,this.tick=0,this.center=[],this.canvas={a:document.createElement("canvas"),b:document.createElement("canvas")},this.ctx={a:this.canvas.a.getContext("2d"),b:this.canvas.b.getContext("2d")}},(i=[{key:"setup",value:function(){this.createCanvas(),this.resize(),this.initPipes(),this.draw()}},{key:"createCanvas",value:function(){this.container=document.querySelector(".container"),this.canvas.b.style="\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        ",this.container.appendChild(this.canvas.b)}},{key:"resize",value:function(){var t=window,e=t.innerWidth,i=t.innerHeight;this.canvas.a.width=e,this.canvas.a.height=i,this.ctx.a.drawImage(this.canvas.b,0,0),this.canvas.b.width=e,this.canvas.b.height=i,this.ctx.b.drawImage(this.canvas.a,0,0),this.center[0]=.5*this.canvas.a.width,this.center[1]=.5*this.canvas.a.height}},{key:"initPipes",value:function(){this.pipeProps=new Float32Array(this.pipePropsLength);for(var t=0;t<this.pipePropsLength;t+=this.pipePropCount)this.initPipe(t)}},{key:"initPipe",value:function(t){var e=.5*Math.PI,i=2*Math.PI,n=this.rand(this.canvas.a.width),r=this.center[1],a=Math.round(this.rand(1))?e:i-e,s=.5+this.rand(1),o=100+this.rand(300),h=2+this.rand(4),c=180+this.rand(60);this.pipeProps.set([n,r,a,s,0,o,h,c],t)}},{key:"updatePipes",value:function(){this.tick++;for(var t=0;t<this.pipePropsLength;t+=this.pipePropCount)this.updatePipe(t)}},{key:"updatePipe",value:function(t){var i=45*Math.PI/180,n=1+t,r=2+t,a=3+t,s=4+t,o=5+t,h=6+t,c=7+t,u=this.pipeProps[t],p=this.pipeProps[n],l=this.pipeProps[r],v=this.pipeProps[a],d=this.pipeProps[s],f=this.pipeProps[o],b=this.pipeProps[h],y=this.pipeProps[c];this.drawPipe(u,p,d,f,b,y),u+=Math.cos(l)*v,p+=Math.sin(l)*v;var P=e(this.checkBounds(u,p),2);u=P[0],p=P[1];var m=!(this.tick%Math.round(this.rand(100))||Math.round(u)%6&&Math.round(p)%6),w=Math.round(this.rand(1))?-1:1;l+=m?i*w:0,d++,this.pipeProps[t]=u,this.pipeProps[n]=p,this.pipeProps[r]=l,this.pipeProps[s]=d,d>f&&this.initPipe(t)}},{key:"drawPipe",value:function(t,e,i,n,r,a){this.ctx.a.save(),this.ctx.a.strokeStyle="hsla(".concat(a,",75%,50%,").concat(.125*this.fadeInOut(i,n),")"),this.ctx.a.beginPath(),this.ctx.a.arc(t,e,r,0,2*Math.PI),this.ctx.a.stroke(),this.ctx.a.closePath(),this.ctx.a.restore()}},{key:"checkBounds",value:function(t,e){return t>this.canvas.a.width&&(t=0),t<0&&(t=this.canvas.a.width),e>this.canvas.a.height&&(e=0),e<0&&(e=this.canvas.a.height),[t,e]}},{key:"render",value:function(){this.ctx.b.save(),this.ctx.b.fillStyle="hsla(150,80%,1%,1)",this.ctx.b.fillRect(0,0,this.canvas.b.width,this.canvas.b.height),this.ctx.b.restore(),this.ctx.b.save(),this.ctx.b.filter="blur(12px)",this.ctx.b.drawImage(this.canvas.a,0,0),this.ctx.b.restore(),this.ctx.b.save(),this.ctx.b.drawImage(this.canvas.a,0,0),this.ctx.b.restore()}},{key:"draw",value:function(){this.updatePipes(),this.render(),window.requestAnimationFrame(this.draw.bind(this))}}])&&n(t.prototype,i),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,a}();window.addEventListener("DOMContentLoaded",(function(){var t=new s;t.createCanvas(),t.setup()})),window.addEventListener("resize",(function(){var t=new s;t.createCanvas(),t.setup()}))})();